{"pageProps":{"post":{"attributes":{},"html":"<h1 id=\"authorizing-with-webauthn\">Authorizing with WebAuthn</h1>\n<p>Let&#39;s first change <code>index.html</code> in the login form</p>\n<pre><code class=\"hljs language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">section</span> <span class=\"hljs-attr\">hidden</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;login_section_webauthn&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;#&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;navlink&quot;</span> <span class=\"hljs-attr\">onclick</span>=<span class=\"hljs-string\">&quot;Auth.webAuthnLogin(); event.preventDefault&quot;</span>&gt;</span>Log in with your Authenticator<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span> \n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">section</span>&gt;</span>                                      \n</code></pre>\n<p>And finally on <code>Auth.js</code> we add:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-attr\">webAuthnLogin</span>: <span class=\"hljs-keyword\">async</span> (optional) =&gt; {\n    <span class=\"hljs-keyword\">const</span> email = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&quot;login_email&quot;</span>).<span class=\"hljs-property\">value</span>;\n    <span class=\"hljs-keyword\">const</span> options = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-variable constant_\">API</span>.<span class=\"hljs-property\">webAuthn</span>.<span class=\"hljs-title function_\">loginOptions</span>(email);        \n    <span class=\"hljs-keyword\">const</span> loginRes = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-title class_\">SimpleWebAuthnBrowser</span>.<span class=\"hljs-title function_\">startAuthentication</span>(options);\n    <span class=\"hljs-keyword\">const</span> verificationRes = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-variable constant_\">API</span>.<span class=\"hljs-property\">webAuthn</span>.<span class=\"hljs-title function_\">loginVerification</span>(email, loginRes);\n    <span class=\"hljs-keyword\">if</span> (verificationRes) {\n        <span class=\"hljs-title class_\">Auth</span>.<span class=\"hljs-title function_\">postLogin</span>(verificationRes, verificationRes.<span class=\"hljs-property\">user</span>);\n    } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-title function_\">alert</span>(verificationRes.<span class=\"hljs-property\">message</span>)\n    }\n}\n</code></pre>\n","slug":"authorizing","title":"Authorizing","section":"Using Webauthn","icon":"fingerprint","filePath":"/Users/firt/Library/Mobile Documents/com~apple~CloudDocs/Trainings/FEM/Authentication/fullstack-authentication/lessons/05-using-webauthn/E-authorizing.md","nextSlug":"/authentication/lessons/bonus/next-steps","prevSlug":"/authentication/lessons/using-webauthn/registering-authentication"}},"__N_SSG":true}