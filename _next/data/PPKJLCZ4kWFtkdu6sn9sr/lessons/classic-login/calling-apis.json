{"pageProps":{"post":{"attributes":{},"html":"<h1 id=\"calling-the-apis\">Calling the APIs</h1>\n<p>Now within <code>scripts/Auth.js</code>, add the following members of the <code>Auth</code> object and test the results</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-attr\">login</span>: <span class=\"hljs-keyword\">async</span> (event) =&gt; {\n    <span class=\"hljs-keyword\">if</span> (event) event.<span class=\"hljs-title function_\">preventDefault</span>();\n    <span class=\"hljs-keyword\">const</span> user = {\n        <span class=\"hljs-attr\">email</span>: <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&quot;login_email&quot;</span>).<span class=\"hljs-property\">value</span>,\n        <span class=\"hljs-attr\">password</span>: <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&quot;login_password&quot;</span>).<span class=\"hljs-property\">value</span>\n\n    };\n    <span class=\"hljs-keyword\">const</span> response = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-variable constant_\">API</span>.<span class=\"hljs-title function_\">login</span>(user);\n    <span class=\"hljs-title class_\">Auth</span>.<span class=\"hljs-title function_\">postLogin</span>(response, { \n        ...user,\n        <span class=\"hljs-attr\">name</span>: response.<span class=\"hljs-property\">name</span>\n    });\n\n},\n<span class=\"hljs-attr\">register</span>: <span class=\"hljs-keyword\">async</span>  (event) =&gt; {\n    event.<span class=\"hljs-title function_\">preventDefault</span>();\n    <span class=\"hljs-keyword\">const</span> user = {\n        <span class=\"hljs-attr\">name</span>: <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&quot;register_name&quot;</span>).<span class=\"hljs-property\">value</span>,\n        <span class=\"hljs-attr\">email</span>: <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&quot;register_email&quot;</span>).<span class=\"hljs-property\">value</span>,\n        <span class=\"hljs-attr\">password</span>: <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&quot;register_password&quot;</span>).<span class=\"hljs-property\">value</span>\n    }\n    <span class=\"hljs-keyword\">const</span> response = <span class=\"hljs-keyword\">await</span> <span class=\"hljs-variable constant_\">API</span>.<span class=\"hljs-title function_\">register</span>(user);\n    <span class=\"hljs-title class_\">Auth</span>.<span class=\"hljs-title function_\">postLogin</span>(response, user);\n},\n</code></pre>\n<p>Also we will create a <code>postLogin</code> and <code>logout</code> methods:</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-attr\">postLogin</span>: <span class=\"hljs-function\">(<span class=\"hljs-params\">response, user</span>) =&gt;</span> {\n    <span class=\"hljs-keyword\">if</span> (response.<span class=\"hljs-property\">ok</span>) {\n        <span class=\"hljs-title class_\">Auth</span>.<span class=\"hljs-property\">isLoggedIn</span> = <span class=\"hljs-literal\">true</span>;\n        <span class=\"hljs-title class_\">Auth</span>.<span class=\"hljs-property\">account</span> = user;\n        <span class=\"hljs-title class_\">Auth</span>.<span class=\"hljs-title function_\">updateStatus</span>();\n\n        <span class=\"hljs-title class_\">Router</span>.<span class=\"hljs-title function_\">go</span>(<span class=\"hljs-string\">&quot;/account&quot;</span>);        \n    } <span class=\"hljs-keyword\">else</span> {\n        <span class=\"hljs-title function_\">alert</span>(response.<span class=\"hljs-property\">message</span>)\n    }           \n},    \n<span class=\"hljs-attr\">logout</span>: <span class=\"hljs-function\">() =&gt;</span> {\n    <span class=\"hljs-title class_\">Auth</span>.<span class=\"hljs-property\">isLoggedIn</span> = <span class=\"hljs-literal\">false</span>;\n    <span class=\"hljs-title class_\">Auth</span>.<span class=\"hljs-property\">account</span> = <span class=\"hljs-literal\">null</span>;\n    <span class=\"hljs-title class_\">Auth</span>.<span class=\"hljs-title function_\">updateStatus</span>();\n    <span class=\"hljs-title class_\">Router</span>.<span class=\"hljs-title function_\">go</span>(<span class=\"hljs-string\">&quot;/&quot;</span>);\n},\n</code></pre>\n","slug":"calling-apis","title":"Calling Apis","section":"Classic Login","icon":"user-secret","filePath":"/Users/firt/Library/Mobile Documents/com~apple~CloudDocs/Trainings/FEM/Authentication/fullstack-authentication/lessons/02-classic-login/C-calling-apis.md","nextSlug":"/authentication/lessons/credential-management/saving-credentials","prevSlug":"/authentication/lessons/classic-login/server-endpoints"}},"__N_SSG":true}